(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{604:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return l});var c=n(0),s=n(31),a=n(8),r=n(6),i=n(20),o=n(7),d=n(10),u=n(26),v=n(14),m=n(3),h=n(32),l=function(){function l(){}return l.init=function(){this.setCheckedPackviewFilterInput(),this.setCheckedPopoverEquivalentsInput(),this.setDefaultMostDownloadPage(),this.setDefaultLatestIconsPage(),this.searchInPack(),this.sendEventScrollSearchRelatedPack(),this.handleFiltersEvents()},l.handleFiltersEvents=function(){this.loadPackEquivalent(),this.handleFilterOrder(),this.queryStringToForm(),this.setFilterEquivalences(),this.setCookieFlaticonSelection(),this.handleSortByTitle(),c.e.FeatureFlag.isEnabled("filters_icons")&&this.handleToggleFilters()},l.setCheckedPackviewFilterInput=function(){var t=this,e=this.packId&&this.packId.value?this.allPackviewFilterInputs.find(function(e){return e.value===(null==(e=t.packId)?void 0:e.value)}):null;0<this.allPackviewFilterInputs.length&&(this.packId=document.getElementById("pack_id")),e&&(e.checked=!0)},l.setCheckedPopoverEquivalentsInput=function(){var e=this.popoverEquivalentsElement&&this.mainsearchStyleIdElement?this.popoverEquivalentsElement.querySelector('input[data-styleid="'+this.mainsearchStyleIdElement.value+'"]'):null;e&&(e.checked=!0)},l.setInputParameter=function(e,t){(l.searchFormCss=document.querySelector("section.search-holder form"))&&document.getElementById("main-search-"+e)&&(document.getElementById("main-search-"+e).value=t)},l.changeRelatedLinks=function(){var e=Array.from(document.querySelectorAll(".related-search a"));0<e.length&&e.forEach(function(e){var t=e.href.replace(/\?(.)*/,"");e.href=""+t+l.formToQuerystring()})},l.formToQuerystring=function(){var t,e="",n=["search-type","search-group"],a=document.querySelector(".main_search_bar");return e=a&&(a=a.querySelectorAll("input"),t=[],a.length)&&(a.forEach(function(e){n.indexOf(e.name)&&l.pushFiltersInput(t,e)}),0<t.length)?"?"+t.join("&"):e},l.pushFiltersInput=function(e,t){return e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value)),e},l.loadPackEquivalent=function(){var p=this;this.allPackviewFilterInputs.forEach(function(e){e.addEventListener("click",function(e){var e=e.target,t=e.value,e=e.dataset,n=e.icontype,a=e.dropdown,l=e.stylelink,r=e.stylename,i=e.styleid,e=(e.licenselink,e.premium),o=null==(o=document.querySelector(".pack-view__header--title span.title"))?void 0:o.textContent,c=document.querySelector("h1.pack-view__header--title i"),s=document.querySelector(".tag-field__item"),d=document.querySelector(".author .style-link"),u=document.getElementById("form-download-pack"),m=(document.querySelector(".sidebar__download__buttons > div"),document.getElementById("pack-lincense"),document.querySelector(".btn-pattern")),h=document.querySelector(".pack-view .style-link a");o&&a&&p.handlePackEquivalentH1(o,a),c&&e&&p.handlePackEquivalentIcon(c,e),s&&i&&a&&p.handlePackEquivalentSearchStyleItem(s,i,a),d&&l&&a&&p.handlePackEquivalentHeaderBreadcrumb(d,l,a),u&&t&&e&&p.handlePackEquivalentDownloadForm(u,t,e),m&&e&&p.handlePackEquivalentPatternButton(m,e),h&&l&&r&&i&&p.handlePackEquivalentStyle(h,l,r,i),t&&n&&p.handlePackEquivalentgetIcons(t,n),p.doSubmit=1,p.axSearch(0),v.a.callModalLicense(),v.a.callModalAttribution()})})},l.handlePackEquivalentH1=function(e,t){var n=document.querySelector(".pack-view__header--title span.title"),a=document.querySelector(".pack-view__header--title span.title-style");n&&(n.innerHTML=Object(i.a)(e)),a&&(a.innerHTML=Object(i.a)(t))},l.handlePackEquivalentIcon=function(e,t){e&&e.classList.remove("icon","icon--premium","flaticon-selection"),"1"==t&&e.classList.add("icon","icon--premium")},l.handlePackEquivalentSearchStyleItem=function(e,t,n){e&&(e.dataset.value=t,e.innerHTML=messages.filters.style+": "+n+' <span class="remove">Ã—</span>',this.setInputParameter("style_id",t))},l.handlePackEquivalentHeaderBreadcrumb=function(e,t,n){var a;e&&void 0!==e&&(a=e.querySelector(".style"),e.href=t,a)&&(a.innerHTML=n)},l.handlePackEquivalentDownloadForm=function(e,t,n){var a,l;null!=e&&void 0!==e&&(e=document.querySelector('#form-download-pack [name="pack_id"]'),a=document.querySelector(".btn-download-pack"),l=document.querySelector('#form-download-pack [name="premium"]'),e&&(e.value=t),a&&(a.dataset.pack=t),l)&&(l.value=n)},l.handlePackEquivalentPatternButton=function(e,t){e&&("1"!=t||m.a.isPremium()?t&&!m.a.isPremium()&&(e.removeAttribute("disabled"),e.classList.remove("disabled")):(e.setAttribute("disabled","disabled"),e.classList.add("disabled")))},l.handlePackEquivalentStyle=function(e,t,n,a){var l;null!=e&&(l=document.querySelector(".pack-view .style-link .btn--bookmark"),e.href=t,e.innerHTML=n,l)&&(l.dataset.elementid=a)},l.handlePackEquivalentgetIcons=function(e,t){t="sticker"===t?"/ajax/hex/get_stickers_by_pack_id/":"/ajax/hex/get_icons_by_pack_id/";"undefined"!=typeof GR_LANGUAGE&&["en","es"].includes(GR_LANGUAGE)?INFINITY.axScript=t+e:INFINITY.axScript="/"+GR_LANGUAGE+t+e},l.axSearch=function(e){if(1==this.doSubmit&&INFINITY){this.doSubmit=0,e=e&&1;var t,n,a=document.getElementById("form_filters"),l=document.querySelector("section.pagination"),r={},i=[],o=(INFINITY.activatedInfinity=1,INFINITY.initPage=1,e&&l&&l.classList.add("hidden"),this.serializeArray(a).filter(function(e){return"style"!==e.name}));for(t in o)o.hasOwnProperty(t)&&"0"!=o[t].value&&o[t].value.length&&"all"!=o[t].value&&(o[t].name.includes("-")&&(o[t].name=o[t].name.split("-").pop()),o[t].value!==s.b.icon)&&(r[o[t].name]=o[t].value);for(n in r)i.push(n+"="+r[n]);e=i.join("&");var e=Object(d.a)(e),l=""+BASE_URL+window.location.pathname.slice(1),a=(l=Object(d.g)(l)).split("/").pop();"packs"==a&&"premium=1"==e||Object(d.c)(l,"",e),c.e.FeatureFlag.isEnabled("smart_match")&&"style-search"===document.body.dataset.section&&window.location.reload(),"search"!=a&&"resultados"!=a||(l=APP_URL+"ajax/packs/slider?"+e,this.loadRelatedPacks(l)),INFINITY.initPage=INFINITY.topPage=INFINITY.bottomPage=1,c.e.window.scroll(0,0),INFINITY.cache_items=[],INFINITY.setUrl=!1,null!=(a=document.getElementById("pagination-spinner"))&&a.classList.remove("hidden"),INFINITY.infinityLoaderBtn(INFINITY.axScript,"clear"),h.a.run()}},l.loadRelatedPacks=function(e){Object(o.a)(e,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json"},withCredentials:!0}).then(function(e){var t,n,a,e=e.items||[],l="";"pack-search"!==c.e.view.section||e.length||window.location.reload(),1<e.length&&(t=c.e.Handlebars.tag("pack-box"),e.forEach(function(e){l+=t(e)})),document.querySelectorAll("section.search-pack-result").length&&(a=document.querySelector("section.search-pack-result .box-scroll"),null!=(n=document.querySelector("section.search-pack-result"))&&n.classList.toggle("hidden",e.length<2),a)&&(a.innerHTML=l)})},l.setDefaultMostDownloadPage=function(){window.location.pathname==messages.url.most_download&&this.orderPopularityInput&&(this.orderPopularityInput.checked=!0)},l.setDefaultLatestIconsPage=function(){window.location.pathname==messages.url.latest_icons&&this.orderDateInput&&(this.orderDateInput.checked=!0)},l.sendEventScrollSearchRelatedPack=function(){var e;null!=(e=document.querySelector(".search-pack-result .box-scroll article a"))&&e.addEventListener("click",function(){var e=null!=(e=document.querySelector(".search-pack-result div.box-scroll"))&&e.scrollLeft?1:0;ga("send","event","Search","Related Pack",e)})},l.setCollapsepFiltersActive=function(e){var t=document.querySelector(".collapsed-filters__item."+e.name);"all"===(null==e?void 0:e.value)?null!=t&&t.classList.remove("active"):null!=t&&t.classList.add("active")},l.handleFilterOrder=function(){var t=this;Array.from(document.querySelectorAll("#form_filters input")).forEach(function(e){e.addEventListener("change",function(e){var e=e.target;t.setSearchGroupFilter(e),t.setStyleFilters(e),t.setChoiceFilter(e),t.setCraftFilter(e),t.redirectPagesOrderDefault(e),t.changeRelatedLinks(),t.setFilterEquivalences(),c.e.FeatureFlag.isEnabled("filters_icons")&&(t.setCollapsepFiltersActive(e),e=document.getElementById("search__filters"))&&(!0===e.checked?a.a.setItem("fo","1"):a.a.setItem("fo","0")),t.doSubmit=1,t.axSearch()})})},l.setSearchGroupFilter=function(e){var t;"search-group"==e.name&&(t=document.querySelector("form[name=search-form] input[name=search-group]"),"packs"==e.value?t.checked=!0:t.checked=!1)},l.setStyleFilters=function(e){var t;"style"==e.name||"shape"==e.name?e.dataset.style&&e.dataset.type&&(t=document.querySelector('#form_filters input[name="main-'+e.dataset.type+'"]'),this.setInputParameter(e.dataset.type,e.dataset.style),t)&&(t.value=e.dataset.style):this.setInputParameter(e.name,e.value)},l.setChoiceFilter=function(e){"choice"==e.name&&0==e.checked&&(e=document.querySelector('input[name="choice"][type="hidden"]'))&&(e.value="0")},l.setCraftFilter=function(e){"craft"==e.name&&0==e.checked?(e=document.querySelector('input[name="craft"][type="hidden"]'))&&(e.value="0"):r.a.send("ga4dl",{event:"ga4event",event_name:"filter_selection",filter_name:"merchandising_license: true"})},l.redirectPagesOrderDefault=function(e){var t;e.checked&&(e.getAttribute("data-value")?"order_by"==e.name&&(t=document.querySelector(".dropdown-popover-order"),l.getQueryString(),e.dataset.value&&l.redirectLastIcons(e.dataset.value),e.dataset.value&&l.redirectTopIcons(e.dataset.value),t)&&"hidden"===window.getComputedStyle(t).visibility&&(l.doSubmit=1,l.axSearch()):ga("send","event","Search","Flaticon Selection"))},l.getQueryString=function(){this.queryString=this.queryString||"",window.location.search&&(this.queryString=window.location.search,this.queryString=this.queryString.replace(/order_by=(\d)*/g,"").replace(/&&/,"&").replace(/^&|&$/,"").replace(/\?&/,"?"),this.queryString=1<this.queryString.length?this.queryString:"")},l.redirectLastIcons=function(e){"date"!=e||0!=window.location.pathname.indexOf(messages.url.most_download)&&3!=window.location.pathname.indexOf(messages.url.most_download)||(window.location.href=""+APP_URL.replace(/\/$/g,"")+messages.url.latest_icons+this.queryString)},l.redirectTopIcons=function(e){"popularity"!=e||0!=window.location.pathname.indexOf(messages.url.latest_icons)&&3!=window.location.pathname.indexOf(messages.url.latest_icons)||(window.location.href=""+APP_URL.replace(/\/$/g,"")+messages.url.most_download+this.queryString)},l.queryStringToForm=function(){var e=window.location.search.slice(1).split("&"),e=(e.forEach(function(e){var e=e.split("="),t=e[0],n=decodeURIComponent(e[1]||""),e=(-1==["word","license","order_by","style_id","family_id","author_id","category_id","pack_id","type","editable_stroke"].indexOf(e[0])&&(e[0]=decodeURIComponent(Object(i.b)(e[0])||"error"),t=Object(i.b)(e[0])),t,Array.from(document.querySelectorAll("#form_filters input[name='"+t+"']"))),e=(void 0!==e&&e.length&&e.forEach(function(e){"radio"!=e.type&&"checkbox"!=e.type||e.name==t&&e.value==n.replace(" ","-")&&(e.checked=!0),"hidden"==e.type&&(e.value=n)}),Array.from(document.querySelectorAll("form.main_search_bar input[name='"+t+"']")));void 0!==e&&e.length&&e.forEach(function(e){"hidden"==e.type&&(e.value=n)})}),Array.from(document.querySelectorAll("#form_filters input[name=style]")));void 0!==e&&e.length&&e.forEach(function(e){"radio"==e.type&&""==e.id&&(e.checked=!0)})},l.setCookieFlaticonSelection=function(){var e;null!=(e=document.querySelector("#form_filters .premium-advise button"))&&e.addEventListener("click",function(){var e=document.querySelector("#form_filters .premium-advise");a.a.setItem("flaticon_selection","1",{expires:new Date((new Date).getTime()+36e5)}),e&&(e.style.display="none")})},l.searchInPack=function(){document.getElementById("input-search-in-pack")&&document.addEventListener("DOMContentLoaded",function(){var e,t=document.getElementById("input-search-in-pack"),n=document.querySelector(".search_in_pack_wrapper .reset-input"),a=document.querySelector("#form_filters #word");null!=(e=t.parentNode)&&e.insertBefore(n,t.nextSibling),t.addEventListener("awesomplete-selectcomplete",function(e){e=e.target;a&&(a.value=e.value),l.doSubmit=1,l.axSearch()},!1),n.addEventListener("click",function(){a&&a.value.trim(),a&&(a.value=""),l.doSubmit=1,l.axSearch()},!1),t.addEventListener("keyup",function(e){var t=e.target,e=e.keyCode||e.charCode;if(8==e||46==e){if(""==a.value.trim()&&""==t.value)return;""==t.value&&n.click()}13==e&&(a.value=t.value.trim(),l.doSubmit=1,l.axSearch())},!1)})},l.serializeArray=function(e){var t=this,n=[];return Array.prototype.slice.call(e.elements).forEach(function(e){!e.name||e.disabled||-1<["file","reset","submit","button"].indexOf(e.type)||-1<["checkbox","radio"].indexOf(e.type)&&!e.checked||e.value===t.filtersValue.shape.linealColor&&n.find(function(e){return e.value===t.filtersValue.color.black})||e.value===t.filtersValue.shape.handDrawn&&n.find(function(e){return e.value===t.filtersValue.color.gradient})||n.push({name:e.name,value:e.value})}),n},l.handleSortByTitle=function(){var n,a,t;c.e.FeatureFlag.isEnabled("smart_match")&&document.querySelector(".group-by")&&document.querySelector(".group-by .popover-button span")?(n=document.querySelector(".group-by .popover-button span"),(a=Array.from(document.querySelectorAll(".group-by label"))).forEach(function(e){e.addEventListener("click",function(e){a.map(function(e){return e.classList.remove("active")}),n&&(n.innerHTML=null==(t=e.currentTarget)?void 0:t.innerHTML);var t=e.currentTarget;null!=t&&t.classList.add("active")})})):document.querySelector(".sort-by")&&document.querySelector(".sort-by .popover-button span")&&(t=document.querySelector(".sort-by .popover-button span"),Array.from(document.querySelectorAll(".sort-by input")).forEach(function(e){e.addEventListener("change",function(e){t&&(t.innerHTML=null==(e=e.target)?void 0:e.dataset.title)})}))},l.setFilterEquivalences=function(){var e,t=document.getElementById("shape-linealColor"),n=document.getElementById("shape-handDrawn"),a=document.getElementById("color-black"),l=document.getElementById("color-gradient"),r=document.getElementById("shape-all"),i=document.getElementById("color-all"),o=document.getElementById("filter-editable_stroke"),c=document.getElementById("shape-fill");null!=(e=document.getElementById("filters--shape"))&&e.querySelectorAll("label").forEach(function(e){e.classList.remove("disabled")}),null!=(e=document.getElementById("filters--colors"))&&e.querySelectorAll("label").forEach(function(e){e.classList.remove("disabled")}),!0===(null==a?void 0:a.checked)&&t&&r&&(null!=(e=t.parentElement)&&e.classList.add("disabled"),!0===t.checked)&&(r.checked=!0),!0===(null==t?void 0:t.checked)&&a&&i&&(null!=(e=a.parentElement)&&e.classList.add("disabled"),!0===a.checked)&&(i.checked=!0),!0===(null==l?void 0:l.checked)&&n&&r&&(null!=(t=n.parentElement)&&t.classList.add("disabled"),!0===n.checked)&&(r.checked=!0),!0===(null==n?void 0:n.checked)&&l&&i&&(null!=(e=l.parentElement)&&e.classList.add("disabled"),!0===l.checked)&&(i.checked=!0),u.a.isEnabled("raw_svg")&&u.a.isEnabled("search_raw_svg")&&(!0===(null==n?void 0:n.checked)||!0===(null==c?void 0:c.checked)?null!=o&&null!=(a=o.parentElement)&&a.classList.add("disabled"):null!=o&&null!=(t=o.parentElement)&&t.classList.remove("disabled"),!0===(null==o?void 0:o.checked))&&(null!=n&&null!=(r=n.parentElement)&&r.classList.add("disabled"),n.checked=!1,null!=c&&null!=(e=c.parentElement)&&e.classList.add("disabled"),c.checked=!1)},l}();l.allPackviewFilterInputs=Array.from(document.querySelectorAll(".pack-view__filters input")),l.packId=null,l.popoverEquivalentsElement=document.getElementById("popover-equivalents"),l.mainsearchStyleIdElement=document.getElementById("main-search-style_id"),l.doSubmit=1,l.searchFormCss=null,l.orderPopularityInput=document.getElementById("order_by-popularity"),l.orderDateInput=document.getElementById("order_by-date"),l.filtersValue={color:{black:"black",multicolor:"color",gradient:"gradient"},shape:{outline:"outline",fill:"fill",linealColor:"lineal-color",handDrawn:"hand-drawn"}},l.handleToggleFilters=function(){var e;null!=(e=document.getElementById("search__filters"))&&e.addEventListener("change",function(e){e=e.currentTarget;!0===e.checked?a.a.setItem("fo","1"):a.a.setItem("fo","0"),e.classList.add("show-filters-in-mobile")})},l.getFilter=function(e){return"0"===e.value&&!e.value.length||"all"===e.value||e.value===s.b.icon?null:e}}}]);
//# sourceMappingURL=31.0e905de644c8f45d7e32.js.map